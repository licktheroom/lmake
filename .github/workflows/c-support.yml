name: Check C Support

run-name: Checking C support for ${{ github.actor}}

on: [push]


jobs:
  check-hello-world:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      - uses: leafo/gh-actions-lua@v9
      - run: echo -e "#include <stdio.h>\n int main()\n{\nfprintf(stdio, \"Hello, lmake!\"); \nreturn 0; \n}" >> main.c
      - run: ./install.sh
      - run: lua lmake --build-dir . --flags -O3 --language c --compiler gcc --files main.c --name test
      - run: ./test
